<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Leil√µes IA v5.8.1</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00f2ff; --pink: #ff0055; --green: #00ff88; --dark: #0a0a0a; --gold: #ffcc00; --glass: rgba(255,255,255,0.03); }
        body { background: #000; color: #fff; font-family: 'Rajdhani'; margin: 0; padding: 0; min-height: 100vh; overflow-y: auto; }
        
        /* STATUS BAR PREMIUM */
        .status-bar { position: sticky; top: 0; z-index: 100; background: rgba(0,0,0,0.9); padding: 12px 20px; border-bottom: 1px solid #1a1a1a; display: flex; justify-content: space-between; backdrop-filter: blur(15px); }
        .stat-box { display: flex; align-items: center; gap: 10px; }
        .stat-label { font-family: 'Orbitron'; font-size: 0.5rem; color: #555; text-transform: uppercase; letter-spacing: 1px; }
        .stat-val { font-family: 'Orbitron'; font-size: 0.85rem; font-weight: bold; }
        .val-cash { color: var(--green); text-shadow: 0 0 10px rgba(0,255,136,0.3); }
        .val-bids { color: var(--neon); text-shadow: 0 0 10px rgba(0,242,255,0.3); }

        .container { padding: 20px; max-width: 500px; margin: 0 auto; }

        /* CARDS REESTILIZADOS */
        .auction-card { background: linear-gradient(145deg, #0f0f0f 0%, #050505 100%); border: 1px solid #1a1a1a; border-radius: 24px; padding: 25px; margin-bottom: 35px; position: relative; transition: 0.4s; }
        .auction-card:hover { border-color: #333; transform: translateY(-5px); }
        
        .header-info { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px; }
        .type-tag { font-family: 'Orbitron'; font-size: 0.45rem; padding: 4px 10px; border-radius: 20px; letter-spacing: 1px; }
        
        /* TEMAS */
        .tag-classic { color: var(--neon); border: 1px solid var(--neon); background: rgba(0,242,255,0.05); }
        .tag-reverse { color: var(--pink); border: 1px solid var(--pink); background: rgba(255,0,85,0.05); }
        .tag-blind { color: var(--gold); border: 1px solid var(--gold); background: rgba(255,204,0,0.05); }

        .item-name { font-family: 'Orbitron'; font-size: 1.2rem; color: #fff; display: block; margin-top: 5px; }
        .item-display { width: 100%; height: 140px; background: radial-gradient(#1a1a1a, #080808); border-radius: 16px; margin: 20px 0; display: flex; align-items: center; justify-content: center; font-size: 3.5rem; border: 1px solid #111; }
        
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        .info-item { background: var(--glass); padding: 10px; border-radius: 12px; border: 1px solid #1a1a1a; }
        .info-label { font-size: 0.55rem; color: #444; font-family: 'Orbitron'; display: block; margin-bottom: 4px; }
        .info-data { font-family: 'Orbitron'; font-size: 0.8rem; color: #eee; }

        .desc-box { background: rgba(0,0,0,0.3); padding: 12px; border-radius: 10px; margin-bottom: 20px; border-left: 2px solid #222; }
        .desc-text { font-size: 0.75rem; color: #888; line-height: 1.5; margin: 0; }

        .btn-bid { width: 100%; padding: 16px; border-radius: 14px; font-family: 'Orbitron'; font-size: 0.8rem; font-weight: bold; cursor: pointer; border: none; transition: 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .btn-bid:active { transform: scale(0.96); }

        .btn-back { width: 100%; background: none; border: 1px solid #222; color: #444; padding: 15px; border-radius: 14px; font-family: 'Orbitron'; font-size: 0.7rem; cursor: pointer; margin-top: 20px; margin-bottom: 50px; }
    </style>
</head>
<body>

    <div class="status-bar">
        <div class="stat-box">
            <div class="stat-label">Carteira</div>
            <div class="stat-val val-cash">R$ <span id="u-saldo">0,00</span></div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Cr√©ditos Bids</div>
            <div class="stat-val val-bids"><span id="u-bids">0</span> BIDS</div>
        </div>
    </div>

    <div class="container">
        
        <div class="auction-card">
            <div class="header-info">
                <span class="type-tag tag-classic">CL√ÅSSICO DE CENTAVOS</span>
                <span style="font-family:'Orbitron'; font-size:0.6rem; color:var(--pink);">‚è± 15s</span>
            </div>
            <span class="item-name">IPHONE 15 PRO MAX</span>
            <div class="item-display">üì±</div>
            
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">PRE√áO ATUAL</span>
                    <span class="info-data" style="color:var(--green)">R$ 1,42</span>
                </div>
                <div class="info-item">
                    <span class="info-label">ARREMATANTE</span>
                    <span class="info-data">@CYBER_X</span>
                </div>
            </div>

            <div class="desc-box">
                <p class="desc-text">O tempo reinicia a cada lance. O √∫ltimo operador antes do cron√¥metro zerar arremata o item pelo pre√ßo atual.</p>
            </div>
            
            <button class="btn-bid" style="background:var(--neon); color:#000;" onclick="darLance(1)">EXECUTAR LANCE (1 BID)</button>
        </div>

        <div class="auction-card">
            <div class="header-info">
                <span class="type-tag tag-reverse">MENOR LANCE √öNICO</span>
                <span style="font-family:'Orbitron'; font-size:0.6rem; color:#666;">‚è± 23:45:10</span>
            </div>
            <span class="item-name">PLAYSTATION 5 SLIM</span>
            <div class="item-display">üéÆ</div>

            <div class="desc-box">
                <p class="desc-text"><b>Regra de Ouro:</b> O vencedor √© quem oferecer o menor valor (Ex: R$ 0,02) que <b>ningu√©m mais</b> tenha oferecido.</p>
            </div>

            <div style="display:flex; gap:10px; margin-bottom:10px;">
                <input type="number" step="0.01" id="val-reverse" placeholder="0,00" style="flex:1; background:#000; border:1px solid #222; color:#fff; padding:15px; border-radius:12px; font-family:'Orbitron';">
                <button class="btn-bid" style="flex:1.2; background:var(--pink); color:#fff;" onclick="darLance(5)">LAN√áAR (5 BIDS)</button>
            </div>
        </div>

        <div class="auction-card">
            <div class="header-info">
                <span class="type-tag tag-blind">BLIND BIDDING</span>
                <span style="font-family:'Orbitron'; font-size:0.6rem; color:#666;">FECHAMENTO HOJE</span>
            </div>
            <span class="item-name">PACK 0.1 BITCOIN</span>
            <div class="item-display">‚Çø</div>

            <div class="desc-box">
                <p class="desc-text">Lances ocultos de alto volume. Ao t√©rmino do ciclo, o sistema revela o maior investidor de Bids como vencedor.</p>
            </div>

            <div style="display:flex; gap:10px;">
                <input type="number" id="val-blind" placeholder="Qtd Bids" style="flex:1; background:#000; border:1px solid #222; color:#fff; padding:15px; border-radius:12px; font-family:'Orbitron';">
                <button class="btn-bid" style="flex:1.2; background:var(--gold); color:#000;" onclick="darLance(10)">ALOCAR (10+ BIDS)</button>
            </div>
        </div>

        <button class="btn-back" onclick="window.location.href='index.html'">SAIR E VOLTAR AO MENU</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, doc, onSnapshot, updateDoc, increment } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

        const firebaseConfig = { apiKey: "AIzaSyAYO5RWaJy5y7r7jvzFk3wq-ByqM_dWWO8", authDomain: "minharifadigital.firebaseapp.com", projectId: "minharifadigital", appId: "1:59630725905:web:396c8cfca385dc3d957ab0" };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        let userBids = 0;

        onAuthStateChanged(auth, user => {
            if (user) {
                onSnapshot(doc(db, "usuarios", user.uid), snap => {
                    const d = snap.data();
                    if(!d) return;
                    userBids = d.bids || 0;
                    document.getElementById('u-saldo').innerText = (d.saldo || 0).toLocaleString('pt-br', {minimumFractionDigits: 2});
                    document.getElementById('u-bids').innerText = userBids;
                });
            } else { window.location.href = "index.html"; }
        });

        window.darLance = async (custo) => {
            if (userBids >= custo) {
                try {
                    await updateDoc(doc(db, "usuarios", auth.currentUser.uid), {
                        bids: increment(-custo)
                    });
                    alert("SISTEMA: Lance registrado com sucesso.");
                } catch(e) { alert("Erro de conex√£o."); }
            } else {
                alert("ACESSO NEGADO: Saldo de Bids insuficiente.");
            }
        };
    </script>
</body>
</html>

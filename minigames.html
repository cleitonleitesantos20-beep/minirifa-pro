<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nexus - Central de Treinamento</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00f2ff; --pink: #ff0055; --green: #00ff88; --dark: #0a0a0a; --card: #111; --gold: #ffcc00; }
        body { background: #000; color: #fff; font-family: 'Rajdhani'; margin: 0; padding: 0; min-height: 100vh; overflow-y: auto; }
        
        .header { height: 60px; display: flex; align-items: center; justify-content: space-between; padding: 0 15px; font-family: 'Orbitron'; font-size: 0.6rem; border-bottom: 1px solid #1a1a1a; margin-bottom: 10px; position: sticky; top:0; background: #000; z-index: 100; }
        .btn-exit { background: none; border: 1px solid var(--pink); color: var(--pink); padding: 5px 12px; border-radius: 4px; font-family: 'Orbitron'; cursor: pointer; font-size: 0.5rem; }

        .container { padding: 15px; padding-bottom: 60px; max-width: 500px; margin: 0 auto; }
        
        .training-info { background: linear-gradient(45deg, #111, #050505); padding: 15px; border-radius: 12px; border: 1px solid var(--neon); margin-bottom: 20px; text-align: center; }
        .training-info p { font-family: 'Orbitron'; font-size: 0.55rem; color: var(--neon); margin: 0; }

        /* Grid de Jogos */
        .games-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .game-select-card { background: var(--card); border: 1px solid #1a1a1a; border-radius: 15px; padding: 15px; text-align: center; transition: 0.3s; cursor: pointer; display: flex; flex-direction: column; align-items: center; position: relative; overflow: hidden; }
        .game-select-card:active { transform: scale(0.95); border-color: var(--neon); }
        
        /* Efeito de brilho hover */
        .game-select-card::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(0,242,255,0.1) 0%, transparent 70%); opacity: 0; transition: 0.3s; }
        .game-select-card:hover::before { opacity: 1; }

        .game-icon { width: 45px; height: 45px; margin-bottom: 10px; z-index: 1; }
        .game-title { font-family: 'Orbitron'; font-size: 0.65rem; color: #fff; margin-bottom: 5px; z-index: 1; letter-spacing: 1px; }
        .game-badge { font-size: 0.45rem; color: var(--green); background: rgba(0, 255, 136, 0.1); padding: 2px 8px; border-radius: 10px; font-family: 'Orbitron'; z-index: 1; }
        
        .best-score { font-size: 0.5rem; color: #555; margin-top: 10px; font-family: 'Orbitron'; z-index: 1; }

        .ad-banner { background: #0a0a0a; border: 1px dashed #333; color: #444; text-align: center; padding: 12px; font-family: 'Orbitron'; font-size: 0.45rem; margin: 20px 0; border-radius: 8px; width: 100%; box-sizing: border-box; }
    </style>
</head>
<body>

    <script type="module" src="nexus-overlay.js"></script>

    <div class="header">
        <span style="color:var(--neon)">NEXUS TRAINING CENTER</span>
        <button class="btn-exit" onclick="window.location.href='index.html'">VOLTAR</button>
    </div>

    <div class="container">
        
        <div class="training-info">
            <p>RECOMPENSA DE TREINAMENTO ATIVA</p>
            <div style="font-size: 1.2rem; font-family: 'Orbitron'; color: #fff; margin-top: 5px;">1 XP <span style="color: var(--green); font-size: 0.6rem;">/ SEG JOGADO</span></div>
        </div>

        <div class="games-grid">
            <div class="game-select-card" onclick="window.location.href='game-neon-snake.html'">
                <img src="https://cdn-icons-png.flaticon.com/512/528/528105.png" class="game-icon" style="filter: drop-shadow(0 0 5px var(--green));">
                <span class="game-title">NEON SNAKE</span>
                <span class="game-badge">LIVE XP</span>
                <span class="best-score">BEST: <span id="score-snake" style="color:var(--green)">0</span></span>
            </div>

            <div class="game-select-card" onclick="window.location.href='game-block-nexus.html'">
                <img src="https://cdn-icons-png.flaticon.com/512/566/566312.png" class="game-icon" style="filter: hue-rotate(180deg) drop-shadow(0 0 5px var(--neon));">
                <span class="game-title">BLOCK NEXUS</span>
                <span class="game-badge">LIVE XP</span>
                <span class="best-score">BEST: <span id="score-blocks" style="color:var(--green)">0</span></span>
            </div>

            <div class="game-select-card" onclick="window.location.href='game-data-match.html'">
                <img src="https://cdn-icons-png.flaticon.com/512/2956/2956869.png" class="game-icon" style="filter: hue-rotate(280deg) drop-shadow(0 0 5px var(--pink));">
                <span class="game-title">DATA MATCH</span>
                <span class="game-badge">LIVE XP</span>
                <span class="best-score">BEST: <span id="score-match" style="color:var(--green)">0</span></span>
            </div>

            <div class="game-select-card" onclick="window.location.href='game-click-hero.html'">
                <img src="https://cdn-icons-png.flaticon.com/512/1063/1063196.png" class="game-icon" style="filter: drop-shadow(0 0 5px var(--gold));">
                <span class="game-title">CYBER CLICKER</span>
                <span class="game-badge">LIVE XP</span>
                <span class="best-score">CLICKS: <span id="score-click" style="color:var(--green)">0</span></span>
            </div>

            <div class="game-select-card" onclick="window.location.href='game-void-pilot.html'" style="grid-column: span 2;">
                <img src="https://cdn-icons-png.flaticon.com/512/1356/1356479.png" class="game-icon" style="filter: drop-shadow(0 0 10px var(--neon));">
                <span class="game-title">VOID PILOT: ASTEROIDS</span>
                <span class="game-badge">LIVE XP</span>
                <span class="best-score">SCORE: <span id="score-void" style="color:var(--green)">0</span></span>
            </div>
        </div>

        <div class="ad-banner">SISTEMA DE TREINAMENTO SINCRONIZADO COM O FIREBASE</div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

        const firebaseConfig = { 
            apiKey: "AIzaSyAYO5RWaJy5y7r7jvzFk3wq-ByqM_dWWO8", 
            authDomain: "minharifadigital.firebaseapp.com", 
            projectId: "minharifadigital", 
            appId: "1:59630725905:web:396c8cfca385dc3d957ab0" 
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        onAuthStateChanged(auth, u => {
            if (u) {
                onSnapshot(doc(db, "usuarios", u.uid), snap => {
                    const d = snap.data(); 
                    if(!d) return;
                    
                    // Sincroniza melhores pontuações dos novos jogos
                    document.getElementById('score-snake').innerText = d.bestSnake || 0;
                    document.getElementById('score-blocks').innerText = d.bestBlocks || 0;
                    document.getElementById('score-match').innerText = d.bestMatch || 0;
                    document.getElementById('score-click').innerText = d.bestClicker || 0;
                    document.getElementById('score-void').innerText = d.bestVoid || 0;
                });
            } else { window.location.href = "index.html"; }
        });
    </script>
</body>
</html>

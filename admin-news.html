<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus News - Admin Seguro</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        body { background: #050505; color: #fff; font-family: 'Rajdhani', sans-serif; padding: 20px; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .admin-card { background: rgba(255,255,255,0.05); padding: 25px; border-radius: 15px; border: 1px solid #ff005566; width: 100%; max-width: 400px; display: none; }
        .access-denied { text-align: center; color: #ff0055; font-family: 'Orbitron'; }
        h2 { font-family: 'Orbitron'; color: #ff0055; font-size: 1.2rem; text-align: center; margin-bottom: 20px; }
        label { display: block; font-size: 0.8rem; color: #888; margin-bottom: 5px; }
        input, textarea { width: 100%; background: #000; border: 1px solid #333; border-radius: 8px; padding: 12px; color: #fff; margin-bottom: 15px; outline: none; }
        button { width: 100%; background: #ff0055; color: #fff; border: none; padding: 15px; border-radius: 8px; font-family: 'Orbitron'; cursor: pointer; font-weight: bold; }
        .preview-img { width: 100%; height: 150px; background: #111; border-radius: 8px; margin-bottom: 15px; object-fit: cover; display: none; }
    </style>
</head>
<body>

    <div id="denied-msg" class="access-denied" style="display: none;">
        <p>ACESSO NEGADO</p>
        <small>Você não tem permissão para postar notícias.</small>
    </div>

    <div class="admin-card" id="admin-ui">
        <h2>POSTAR NOTÍCIA</h2>
        <label>Título</label>
        <input type="text" id="title" placeholder="Ex: Novo Drop!">
        <label>URL Imagem (9:16)</label>
        <input type="text" id="imgUrl" placeholder="https://..." id="imgInput">
        <img id="preview" class="preview-img">
        <label>Texto</label>
        <textarea id="summary" rows="4" placeholder="Detalhes..."></textarea>
        <button id="sendBtn">PUBLICAR AGORA</button>
    </div>

    <script type="module">
        import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAYO5RWaJy5y7r7jvzFk3wq-ByqM_dWWO8",
            authDomain: "minharifadigital.firebaseapp.com",
            projectId: "minharifadigital",
            appId: "1:59630725905:web:396c8cfca385dc3d957ab0"
        };

        const app = !getApps().length ? initializeApp(firebaseConfig) : getApp();
        const db = getFirestore(app);
        const auth = getAuth(app);

        // COLOQUE SEU UID AQUI
        const ADMIN_UID = "7co6IdysVvaVpQnoTvymNv4Q3mx1"; 

        onAuthStateChanged(auth, user => {
            if (user && user.uid === ADMIN_UID) {
                document.getElementById('admin-ui').style.display = 'block';
            } else {
                document.getElementById('denied-msg').style.display = 'block';
            }
        });

        document.getElementById('sendBtn').onclick = async () => {
            const t = document.getElementById('title').value;
            const s = document.getElementById('summary').value;
            const i = document.getElementById('imgUrl').value;

            if(!t || !s || !i) return alert("Preencha tudo!");

            try {
                await addDoc(collection(db, "noticias"), {
                    titulo: t, resumo: s, imagem: i, timestamp: serverTimestamp()
                });
                alert("Publicado!");
                location.reload();
            } catch (e) { alert("Erro ao postar."); }
        };
    </script>
</body>
</html>
